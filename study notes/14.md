# 14장 댓글 엔티티와 리파지터리 만들기

### 일대다 관계, 다대일 관계
한 엔티티의 하나의 데이터가 다른 엔티티의 여러 데이터와 연관될 때 이를 **일대다 관계**라고 함. 반대로 한 엔티티의 여러 데이터가 다른 엔티티의 한 데이터와 연관될 때는 **다대일 관계**라고 함. 

### 대표키와 외래키
엔티티에서 자신을 대표하는 값을 **대표키(PK)**라고 하고, 다른 엔티티를 참조할 수 있도록 다른 엔티티의 대표키를 가리키는 값을 **외래키(FK)**라고 함. 

### 다대일 관계 설정
두 엔테테를 다대일 관계로 설정하려면 **대표키와 외래키를 설정**함. 자식 엔티티에 외래키를 만들어 부모 엔티티의 대표키 값을 갖게 함. 

### @ManyToOne
두 엔티티를 **다대일 관계로 설정**하는 어노테이션

### @JoinColumn
해당 엔티티에 **외래키를 생성**하는 어노테이션. name 속성으로 매핑할 외래키 이름을 지정할 수 있음. 

### JpaRepository
ListCrudRepository와 ListPagingAndSortingRepository를 상속받은 인터페이스로, **CRUD 기능**뿐만 아니라 **엔티티를 페이지 단위로 조회 및 정렬하는 기능**과 **JPA에 특화된 여타 기능** 제공. 

### 네이티브 쿼리 메서드
**리파지터리의 메서드로 쿼리를 작성해 실행**함. **@Query 어노테이션**이나 **orm.xml 파일** 이용해 만듦.

### @Query
SQL과 유사한 **JPQL이라는 객체 지향 쿼리 언어를 통해 쿼리를 처리할 수 있도록 지원**하는 어노테이션. <u>기존의 SQL 문을 그대로 쿼리 언어로 사용하고 싶을 때 nativeQuery 속성을 true로 설정</u>

### 네이티브 쿼리 XML
메서드에서 수행할 쿼리를 XML로 작성한 것. 

### orm.xml 코드 작성 방법

### @DataJpaTest
**JPA**와 연동한 테스트를 진행하는 어노테이션. <u>리파지터리와 엔티티 등의 객체를 테스트 코드에서 사용할 수 있게 함</u>. 

### DisplayName
테스트 이름을 붙일 때 사용. <u>메서드 이름은 유지하고 테스트 이름을 바꾸고 싶을 때</u> 사용함. 